{"version":3,"sources":["webpack:///./src/views/User/ChatBox.vue","webpack:///./src/views/User/ChatBox.vue?eebb","webpack:///./src/views/User/ChatBox.vue?1a04"],"names":["class","type","header","body-content","statCheck","chats","user","message","chat","key","index","userId","_id","formSubmit","enctype","form","text","placeholder","required","name","components","MainLayout","StatCheck","Post","props","setup","status","err","jumpToButtom","element","document","getElementsByClassName","scrollTop","scrollHeight","store","formData","friendId","id","dispatch","getters","getPostsState","value","res","push","success","msg","setTimeout","authState","__exports__","render"],"mappings":"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","file":"js/chunk-38c9003e.98650d5d.js","sourcesContent":["<template>\r\n<MainLayout header=\"Chax Box\">\r\n  <template #body-content>\r\n    <div class=\"row\">\r\n      <div class=\"col-xl-8 col-lg-7\">\r\n\r\n          <!-- Illustrations -->\r\n          <div class=\"card shadow mb-4\">\r\n              <div class=\"card-header py-3 d-flex flex-row align-items-center justify-content-between\">\r\n                  <h6 class=\"m-0 font-weight-bold text-primary\">Messages</h6>\r\n              </div>\r\n              <div class=\"card-body\">\r\n                <div class=\"p-1\">\r\n                    <StatCheck v-if=\"statCheck\" :statCheck=\"statCheck\" />\r\n\r\n                    <div \r\n                      v-if=\"chats && user\" \r\n                      class=\"scroll-container\"\r\n                    >\r\n                      <div\r\n                        v-for=\"chat in chats.message\"\r\n                        :key=\"chat.index\"\r\n                        class=\"my-1\"\r\n                      >\r\n                          <div>\r\n                            <span \r\n                              class=\"message\"\r\n                              :class=\"(chat.userId == user._id ? 'current-user':'')\"\r\n                            >\r\n                              {{ chat.message }}\r\n                            </span>\r\n                          </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div class=\"card-footer\">\r\n                      <form class=\"send-form\" @submit.prevent=\"formSubmit\" enctype=\"multipart/form-data\">\r\n                        <input type=\"text\" v-model=\"form.text\" class=\"\"\r\n                            placeholder=\"Message\" required>\r\n                        <button type=\"submit\">\r\n                          <i class=\"far fa-paper-plane\"></i>\r\n                        </button>\r\n                      </form>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n          </div>\r\n\r\n      </div>\r\n  </div>\r\n  </template>\r\n</MainLayout>\r\n</template>\r\n\r\n<script>\r\nimport MainLayout from '@/components/MainLayout.vue'\r\nimport StatCheck from '@/components/StatCheck.vue'\r\nimport Post from '@/components/Post.vue'\r\nimport { onMounted } from '@vue/runtime-core'\r\nimport { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\n\r\nexport default {\r\n name: 'Home',\r\n  components: {\r\n    MainLayout,\r\n    StatCheck,\r\n    Post\r\n  },\r\n  props: ['id'],\r\n  setup(props) {\r\n      // Form functionality\r\n    const chats = ref(null)\r\n    const user = ref(null)\r\n    const form = ref({\r\n      text: ''\r\n    })\r\n    const statCheck = ref({\r\n      status: '',\r\n      err: ''\r\n    })\r\n\r\n    const jumpToButtom = () => {\r\n      let element = document.getElementsByClassName(\"scroll-container\")\r\n      element.scrollTop = element.scrollHeight\r\n    }\r\n\r\n    const store = useStore()\r\n\r\n    onMounted(async () => {\r\n      const formData = {\r\n        friendId: props.id\r\n      }\r\n      await store.dispatch('getChats', formData)\r\n\r\n      statCheck.value.status = await store.getters.getPostsState\r\n      user.value = await store.getters.user\r\n      chats.value = await store.getters.chats\r\n      if (chats.value != null) {\r\n        jumpToButtom()\r\n      }\r\n    })\r\n\r\n    const formSubmit = async () => {\r\n      // Send Post\r\n        const formData = {\r\n          friendId: props.id,\r\n          message: form.value.text\r\n        }\r\n        statCheck.value.status = 'Sending...'\r\n        statCheck.value.err = ''\r\n        const res = await store.dispatch('saveChat', formData)\r\n        \r\n        chats.value.message.push({\r\n          userId: user.value._id,\r\n          message: form.value.text\r\n        })\r\n        form.value.text = ''\r\n        jumpToButtom()\r\n  \r\n        if (res.success === true) {\r\n          statCheck.value.status = res.msg\r\n          setTimeout(() => {\r\n            statCheck.value.status = ''\r\n          }, 3000)\r\n        } else {\r\n          statCheck.value.status = await store.getters.authState\r\n          statCheck.value.err = res.err\r\n        }\r\n    }\r\n\r\n\r\n    return {\r\n      form,\r\n      formSubmit,\r\n      statCheck,\r\n      chats,\r\n      user\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.scroll-container {\r\n  width: 100%;\r\n  height: 400px;\r\n  overflow-y: scroll;\r\n  scroll-behavior: smooth;\r\n}\r\n\r\n.message {\r\n  border-radius: 5px;\r\n  margin: 5px;\r\n  padding: 3px 7px;\r\n  font-size: 14px;\r\n  background: #e2e2e2;\r\n  color: #252525;\r\n  flex-direction: column;\r\n}\r\n\r\n.current-user {\r\n  justify-content: flex-end;\r\n  text-align: right;\r\n  background: #4766ee;\r\n  color: #fff;\r\n}\r\n\r\n.flex {\r\n  display: flex;\r\n}\r\n\r\n.send-form {\r\n  display: flex;\r\n}\r\n\r\n.send-form input[type=\"text\"] {\r\n  flex: 1 1 100%;\r\n  appearance: none;\r\n  border: none;\r\n  outline: none;\r\n  background: none;\r\n  display: block;\r\n  width: 100%;\r\n  padding: 10px 15px;\r\n  border-radius: 8px 0 0 8px;\r\n  color: #333;\r\n  box-shadow: 0 0 0 rgba(0, 0, 0, 0);\r\n  background-color: #f3f3f3;\r\n  transition: 0.4s time;\r\n}\r\n\r\n.send-form button {\r\n  appearance: none;\r\n  border: none;\r\n  outline: none;\r\n  background: none;\r\n  display: block;\r\n  padding: 10px 15px;\r\n  border-radius: 0 8px 8px 0;\r\n  background-color: #372dc5;\r\n  color: #fff;\r\n  font-weight: 700;\r\n}\r\n</style>","import { render } from \"./ChatBox.vue?vue&type=template&id=35ad0766&scoped=true\"\nimport script from \"./ChatBox.vue?vue&type=script&lang=js\"\nexport * from \"./ChatBox.vue?vue&type=script&lang=js\"\n\nimport \"./ChatBox.vue?vue&type=style&index=0&id=35ad0766&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Downloads\\\\Vision\\\\files\\\\Fiverr\\\\Gigs\\\\Task-App\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-35ad0766\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ChatBox.vue?vue&type=style&index=0&id=35ad0766&scoped=true&lang=css\""],"sourceRoot":""}